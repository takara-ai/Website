{{ $galleryImages := resources.Match "images/gallery/*" }}

<div class="container mx-auto px-2 sm:px-4">
  <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4">
    {{ range $index, $image := $galleryImages }}
      {{ $alt := $image.Name }}
      {{ $isFeatured := eq (mod $index 7) 0 }}
      {{ $width := $image.Width }}
      {{ $height := $image.Height }}
      {{ $aspectRatio := div (float $width) (float $height) }}
      
      <div class="{{ if $isFeatured }}col-span-2 row-span-2{{ end }} relative overflow-hidden" style="padding-bottom: {{ mul (div 1 $aspectRatio) 100 }}%;">
        {{ $resizedImage := $image.Resize "800x" }}
        <img
          src="{{ $resizedImage.RelPermalink }}"
          alt="{{ $alt }}"
          class="absolute inset-0 w-full h-full object-cover rounded-lg border border-dashed border-black transition-all duration-300 ease-in-out hover:brightness-75"
          loading="lazy"
        >
      </div>
    {{ end }}
  </div>
</div>