document.addEventListener("DOMContentLoaded",async function(){const u=50,_=2e3;class y{constructor(e,t,n){this.x=e,this.y=t,this.radius=10,this.activated=!1,this.label=n,this.graphics=new PIXI.Graphics,this.text=new PIXI.Text(n,{fontSize:12,fill:16777215,align:"center"}),this.updateGraphics()}activate(){this.activated=!0,this.updateGraphics()}deactivate(){this.activated=!1,this.updateGraphics()}updateGraphics(){this.graphics.clear();const e=this.activated?13382451:0;this.graphics.beginFill(e),this.graphics.drawCircle(0,0,this.radius),this.graphics.endFill()}}class j{constructor(e,t){this.node1=e,this.node2=t,this.activated=!1,this.graphics=new PIXI.Graphics,d.addChild(this.graphics),this.updateGraphics()}activate(){this.activated=!0,this.updateGraphics()}deactivate(){this.activated=!1,this.updateGraphics()}updateGraphics(){this.graphics.clear();const e=this.activated?16711680:0,t=this.activated?2:1;this.graphics.lineStyle(t,e),this.graphics.moveTo(this.node1.x,this.node1.y),this.graphics.lineTo(this.node2.x,this.node2.y),this.graphics.endFill()}}const t=new PIXI.Application({resizeTo:document.getElementById("pixi-container"),backgroundAlpha:0,resolution:window.devicePixelRatio,autoDensity:!0,antialias:!0,powerPreference:"high-performance"}),n=document.getElementById("pixi-container");n.appendChild(t.view),window.addEventListener("resize",()=>{t.renderer.resize(n.clientWidth,n.clientHeight)}),t.renderer.resize(n.clientWidth,n.clientHeight);let l=[],i=[];const a=new PIXI.Container,d=new PIXI.Container;t.stage.addChild(d),t.stage.addChild(a);function h(){const e=window.innerWidth;return e<640?5:Math.min(20,Math.floor((e-640)/64)+6)}const b=h(),s=Array.from({length:b},()=>Math.floor(Math.random()*10)+2),m=s.map((e,t)=>Array.from({length:e},(e,n)=>`L${t+1}N${n+1}`));function f(e,t,n){let s=new y(e,t,n);return l.push(s),a.addChild(s.graphics),a.addChild(s.text),s.updateGraphics(),s}function p(e,t){let n=new j(e,t);i.push(n),n.updateGraphics()}const g=t.screen.width/(s.length+1),v=(e,t)=>e/(t+1);s.forEach((e,n)=>{const s=(n+1)*g,o=v(t.screen.height,e);for(let t=0;t<e;t++){const i=(t+1)*o;f(s,i,m[n][t])}});const e=[];let o=0;s.forEach(t=>{const n=l.slice(o,o+t);e.push(n),o+=t});for(let t=0;t<e.length-1;t++)e[t].forEach(n=>{e[t+1].forEach(e=>{p(n,e)})});function c(t){if(t>=e.length)return;r(t-1),e[t].forEach(e=>{Math.random()>.5&&e.activate()}),t<e.length-1&&e[t].forEach(n=>{n.activated&&e[t+1].forEach(e=>{i.forEach(t=>{t.node1===n&&t.node2===e&&(t.activate(),e.activate())})})}),setTimeout(()=>c(t+1),u)}function r(t){if(t<0)return;e[t].forEach(e=>e.deactivate()),i.forEach(n=>{e[t].includes(n.node1)&&n.deactivate()})}function w(){let t=0;function n(){t===0&&e.length>0&&r(e.length-1),t>=e.length?(t=0,setTimeout(n,_)):(c(t),t++,setTimeout(n,u))}n()}w()})