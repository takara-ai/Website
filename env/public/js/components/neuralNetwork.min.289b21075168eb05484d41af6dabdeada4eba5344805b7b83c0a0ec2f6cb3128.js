document.addEventListener("DOMContentLoaded",async function(){class m{constructor(e,t,n){this.x=e,this.y=t,this.radius=10,this.activated=!1,this.label=n,this.graphics=new PIXI.Graphics,this.text=new PIXI.Text(n,{fontSize:12,fill:16777215,align:"center"}),this.updateGraphics()}activate(){this.activated=!0,this.updateGraphics()}deactivate(){this.activated=!1,this.updateGraphics()}updatePosition(){this.graphics.x=this.x,this.graphics.y=this.y,this.text.x=this.x-this.radius,this.text.y=this.y-this.radius-15}updateGraphics(){this.graphics.clear();const e=this.activated?13382451:0;this.graphics.circle(0,0,this.radius),this.graphics.fill(e)}}class v{constructor(e,n){this.node1=e,this.node2=n,this.activated=!1,this.graphics=new PIXI.Graphics,t.stage.addChild(this.graphics),this.updateGraphics()}activate(){this.activated=!0,this.updateGraphics()}deactivate(){this.activated=!1,this.updateGraphics()}updateGraphics(){this.graphics.clear();const e=this.activated?16711680:0,t=this.activated?2:1;this.graphics.moveTo(this.node1.x,this.node1.y),this.graphics.lineTo(this.node2.x,this.node2.y),this.graphics.setStrokeStyle({width:t,color:e,alpha:1}),this.graphics.stroke()}}const t=new PIXI.Application;await t.init({resizeTo:document.getElementById("pixi-container"),backgroundAlpha:0,resolution:window.devicePixelRatio,autoDensity:!0,antialias:!0,powerPreference:"high-performance"}),document.getElementById("pixi-container").appendChild(t.canvas),document.getElementById("pixi-container").appendChild(t.view),window.addEventListener("resize",()=>{t.renderer.resize(document.getElementById("pixi-container").clientWidth,document.getElementById("pixi-container").clientHeight)}),t.renderer.resize(document.getElementById("pixi-container").clientWidth,document.getElementById("pixi-container").clientHeight);let o=[],n=[];function p(){const t=window.innerWidth;let e;return t<640?e=4:e=Math.min(20,Math.floor((t-640)/64)+6),e}const f=p(),s=Array.from({length:f},()=>Math.floor(Math.random()*10)+2),c=s.map((e,t)=>Array.from({length:e},(e,n)=>`L${t+1}N${n+1}`));function l(e,n,s){let i=new m(e,n,s);return o.push(i),t.stage.addChild(i.graphics),t.stage.addChild(i.text),i}function d(e,t){let s=new v(e,t);n.push(s)}const u=t.screen.width/(s.length+1),h=(e,t)=>e/(t+1);s.forEach((e,n)=>{const s=(n+1)*u,o=h(t.screen.height,e);for(let t=0;t<e;t++){const i=(t+1)*o;l(s,i,c[n][t])}});const e=[];let i=0;s.forEach(t=>{const n=o.slice(i,i+t);e.push(n),i+=t});for(let t=0;t<e.length-1;t++)e[t].forEach(n=>{e[t+1].forEach(e=>{d(n,e)})});function r(t){if(t>=e.length)return;t>0&&(e[t-1].forEach(e=>e.deactivate()),n.forEach(n=>{e[t-1].includes(n.node1)&&n.deactivate()})),e[t].forEach(e=>{Math.random()>.5&&e.activate()}),t<e.length-1&&e[t].forEach(s=>{s.activated&&e[t+1].forEach(e=>{n.forEach(t=>{t.node1===s&&t.node2===e&&(t.activate(),e.activate())})})}),setTimeout(()=>{r(t+1)},50)}function g(){let t=0;function s(){t===0&&e.length>0&&(e[e.length-1].forEach(e=>e.deactivate()),n.forEach(t=>{e[e.length-1].includes(t.node1)&&t.deactivate()})),t>=e.length?(t=0,setTimeout(s,2e3)):(r(t),t++,setTimeout(s,50))}s()}function a(){o.forEach(e=>{e.updatePosition()}),n.forEach(e=>{e.updateGraphics()}),t.renderer.render(t.stage),requestAnimationFrame(a)}t.stage.interactiveChildren=!1,requestAnimationFrame(a),g()})