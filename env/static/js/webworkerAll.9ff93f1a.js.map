{"mappings":"A,C,K,S,E,C,C,C,C,C,C,C,E,O,c,C,E,E,C,I,E,I,E,W,C,E,a,C,C,E,C,I,E,A,W,iB,C,E,E,Q,C,E,Q,S,C,C,C,E,E,S,E,S,E,S,E,S,E,S,E,S,E,S,E,S,E,S,E,S,E,Q,G,E,Q,S,C,C,C,E,E,E,O,C,a,I,G,I,E,E,S,E,E,SG6Ga,IAAA,EAAa,IAvFnB,MAaH,YAAY,CACZ,CAAA,CACS,IAAA,CAAA,WAAA,CAAqB,OAAA,MAAA,CAAO,MAC5B,IAAA,CAAA,aAAA,CAAgB,GAAiB,CAAA,EACtC,IAAA,CAAK,gBAAmB,CAAA,CAAA,CAAA,CAQpB,wBAAwB,CAAA,CAAoB,CACpD,CAAA,CACI,IAAM,EAAS,AAAA,CAAA,EAAA,EAAA,UAAA,AAAA,EAAW,GAAI,GAAE,YAAa,EAE7C,CAAA,EAAO,KAAQ,CAAA,EACf,EAAO,MAAS,CAAA,EAEV,IAAA,EAAU,EAAO,UAAA,CAAW,MAE3B,MAAA,CAAE,OAAA,EAAQ,QAAA,CAAQ,CAAA,CAUtB,2BAA2B,CAAA,CAAkB,CAAmB,CAAA,EAAa,CACpF,CAAA,CACI,EAAW,KAAK,IAAA,CAAM,EAAW,EAAc,MAC/C,EAAY,KAAK,IAAA,CAAM,EAAY,EAAc,MACjD,EAAW,AAAA,CAAA,EAAA,EAAA,QAAA,AAAA,EAAS,GACpB,EAAY,AAAA,CAAA,EAAA,EAAA,QAAA,AAAA,EAAS,GAEf,IAAA,EAAA,AAAO,CAAA,GAAY,EAAA,EAAO,CAAA,GAAa,CAAA,CAExC,CAAA,IAAA,CAAK,WAAY,CAAA,EACtB,EACS,CAAA,IAAA,CAAA,WAAA,CAAY,EAAG,CAAI,EAAC,AAAD,EAG5B,IAAI,EAAmB,IAAA,CAAK,WAAY,CAAA,EAAG,CAAE,GAAI,GAO1C,OALF,GAEkB,CAAA,EAAA,IAAA,CAAK,uBAAwB,CAAA,EAAU,EAF9D,EAKO,CAAA,CAOJ,uBAAuB,CAC9B,CAAA,CACI,GAAM,CAAA,MAAE,CAAA,CAAA,OAAO,CAAO,CAAA,CAAI,EAAiB,MAAA,CAI3C,IAAA,CAAK,WAAY,CAFX,AAAO,CAAA,GAAS,EAAA,EAAO,CAAA,GAAU,CAAA,EAEjB,CAAA,IAAA,CAAK,EAAgB,CAGxC,OACP,CACI,IAAA,CAAK,WAAA,CAAc,CAAA,CAAC,CAE5B,C,G,E,Q,S,C,C,C,E,E,E,O,C,+B,I,G,I,E,E,SEzGA,IAAM,EAA8D,CAAA,EAQ7D,SAAS,EAA6B,CAC7C,EACQ,IAAA,EAA4B,CAAA,CAA8B,EAAW,CAErE,GAAA,EAAkC,OAAA,EAEhC,IAAA,EAAe,IAAI,WAAW,GAEpC,IAAA,IAAS,EAAI,EAAG,EAAI,EAAa,IAE7B,CAAA,CAAa,EAAK,CAAA,EAOf,OAJqB,CAA8B,CAAA,EAAe,CAAA,IAAI,EAAA,YAAA,CAAa,CACtF,UAAW,CAAE,MAAO,EAAc,KAAM,MAAO,KAAM,CAAY,CAAA,EAClE,CAAE,SAAU,CAAA,CAAA,EAGnB,C,E,C","sources":["<anon>","node_modules/pixi.js/lib/environment-webworker/webworkerAll.mjs","node_modules/pixi.js/lib/rendering/renderers/shared/texture/CanvasPool.mjs","node_modules/pixi.js/src/rendering/renderers/shared/texture/CanvasPool.ts","node_modules/pixi.js/lib/rendering/renderers/gl/shader/getBatchSamplersUniformGroup.mjs","node_modules/pixi.js/src/rendering/renderers/gl/shader/getBatchSamplersUniformGroup.ts"],"sourcesContent":["(() => {\n\nfunction $parcel$export(e, n, v, s) {\n  Object.defineProperty(e, n, {get: v, set: s, enumerable: true, configurable: true});\n}\n\n      var $parcel$global = globalThis;\n    var parcelRequire = $parcel$global[\"parcelRequireedc5\"];\nvar parcelRegister = parcelRequire.register;\nparcelRegister(\"619Sj\", function(module, exports) {\nparcelRequire(\"lnybq\");\nparcelRequire(\"1Hpjw\");\nparcelRequire(\"guhjI\");\nparcelRequire(\"dFqny\");\nparcelRequire(\"dtMIl\");\nparcelRequire(\"1gLCI\");\nparcelRequire(\"6JnOC\");\nparcelRequire(\"bwXC0\");\nparcelRequire(\"1ZDbs\");\nparcelRequire(\"87e4e\");\nparcelRequire(\"hdvNI\");\n\"use strict\";\n\n});\n\nparcelRegister(\"gjVMv\", function(module, exports) {\n\n$parcel$export(module.exports, \"CanvasPool\", () => $eb69b04842624ee0$export$e56d0a06781accc9);\n\nvar $lTNTn = parcelRequire(\"lTNTn\");\n\nvar $ijJaR = parcelRequire(\"ijJaR\");\n\"use strict\";\nclass $eb69b04842624ee0$export$62d9f0b8aada09d7 {\n    constructor(canvasOptions){\n        this._canvasPool = /* @__PURE__ */ Object.create(null);\n        this.canvasOptions = canvasOptions || {};\n        this.enableFullScreen = false;\n    }\n    /**\n   * Creates texture with params that were specified in pool constructor.\n   * @param pixelWidth - Width of texture in pixels.\n   * @param pixelHeight - Height of texture in pixels.\n   */ _createCanvasAndContext(pixelWidth, pixelHeight) {\n        const canvas = (0, $lTNTn.DOMAdapter).get().createCanvas();\n        canvas.width = pixelWidth;\n        canvas.height = pixelHeight;\n        const context = canvas.getContext(\"2d\");\n        return {\n            canvas: canvas,\n            context: context\n        };\n    }\n    /**\n   * Gets a Power-of-Two render texture or fullScreen texture\n   * @param minWidth - The minimum width of the render texture.\n   * @param minHeight - The minimum height of the render texture.\n   * @param resolution - The resolution of the render texture.\n   * @returns The new render texture.\n   */ getOptimalCanvasAndContext(minWidth, minHeight, resolution = 1) {\n        minWidth = Math.ceil(minWidth * resolution - 1e-6);\n        minHeight = Math.ceil(minHeight * resolution - 1e-6);\n        minWidth = (0, $ijJaR.nextPow2)(minWidth);\n        minHeight = (0, $ijJaR.nextPow2)(minHeight);\n        const key = (minWidth << 17) + (minHeight << 1);\n        if (!this._canvasPool[key]) this._canvasPool[key] = [];\n        let canvasAndContext = this._canvasPool[key].pop();\n        if (!canvasAndContext) canvasAndContext = this._createCanvasAndContext(minWidth, minHeight);\n        return canvasAndContext;\n    }\n    /**\n   * Place a render texture back into the pool.\n   * @param canvasAndContext\n   */ returnCanvasAndContext(canvasAndContext) {\n        const { width: width, height: height } = canvasAndContext.canvas;\n        const key = (width << 17) + (height << 1);\n        this._canvasPool[key].push(canvasAndContext);\n    }\n    clear() {\n        this._canvasPool = {};\n    }\n}\nconst $eb69b04842624ee0$export$e56d0a06781accc9 = new $eb69b04842624ee0$export$62d9f0b8aada09d7();\n\n});\n\nparcelRegister(\"cwDSV\", function(module, exports) {\n\n$parcel$export(module.exports, \"getBatchSamplersUniformGroup\", () => $d3be956b72507601$export$5fc8295c6cba6ffe);\n\nvar $1DaYW = parcelRequire(\"1DaYW\");\n\"use strict\";\nconst $d3be956b72507601$var$batchSamplersUniformGroupHash = {};\nfunction $d3be956b72507601$export$5fc8295c6cba6ffe(maxTextures) {\n    let batchSamplersUniformGroup = $d3be956b72507601$var$batchSamplersUniformGroupHash[maxTextures];\n    if (batchSamplersUniformGroup) return batchSamplersUniformGroup;\n    const sampleValues = new Int32Array(maxTextures);\n    for(let i = 0; i < maxTextures; i++)sampleValues[i] = i;\n    batchSamplersUniformGroup = $d3be956b72507601$var$batchSamplersUniformGroupHash[maxTextures] = new (0, $1DaYW.UniformGroup)({\n        uTextures: {\n            value: sampleValues,\n            type: `i32`,\n            size: maxTextures\n        }\n    }, {\n        isStatic: true\n    });\n    return batchSamplersUniformGroup;\n}\n\n});\n\n})();\n//# sourceMappingURL=webworkerAll.9ff93f1a.js.map\n","import '../app/init.mjs';\nimport '../spritesheet/init.mjs';\nimport '../rendering/init.mjs';\nimport '../scene/graphics/init.mjs';\nimport '../scene/mesh/init.mjs';\nimport '../scene/text/init.mjs';\nimport '../scene/text-bitmap/init.mjs';\nimport '../scene/text-html/init.mjs';\nimport '../scene/sprite-tiling/init.mjs';\nimport '../scene/sprite-nine-slice/init.mjs';\nimport '../filters/init.mjs';\n\n\"use strict\";\n//# sourceMappingURL=webworkerAll.mjs.map\n","import { DOMAdapter } from '../../../../environment/adapter.mjs';\nimport { nextPow2 } from '../../../../maths/misc/pow2.mjs';\n\n\"use strict\";\nclass CanvasPoolClass {\n  constructor(canvasOptions) {\n    this._canvasPool = /* @__PURE__ */ Object.create(null);\n    this.canvasOptions = canvasOptions || {};\n    this.enableFullScreen = false;\n  }\n  /**\n   * Creates texture with params that were specified in pool constructor.\n   * @param pixelWidth - Width of texture in pixels.\n   * @param pixelHeight - Height of texture in pixels.\n   */\n  _createCanvasAndContext(pixelWidth, pixelHeight) {\n    const canvas = DOMAdapter.get().createCanvas();\n    canvas.width = pixelWidth;\n    canvas.height = pixelHeight;\n    const context = canvas.getContext(\"2d\");\n    return { canvas, context };\n  }\n  /**\n   * Gets a Power-of-Two render texture or fullScreen texture\n   * @param minWidth - The minimum width of the render texture.\n   * @param minHeight - The minimum height of the render texture.\n   * @param resolution - The resolution of the render texture.\n   * @returns The new render texture.\n   */\n  getOptimalCanvasAndContext(minWidth, minHeight, resolution = 1) {\n    minWidth = Math.ceil(minWidth * resolution - 1e-6);\n    minHeight = Math.ceil(minHeight * resolution - 1e-6);\n    minWidth = nextPow2(minWidth);\n    minHeight = nextPow2(minHeight);\n    const key = (minWidth << 17) + (minHeight << 1);\n    if (!this._canvasPool[key]) {\n      this._canvasPool[key] = [];\n    }\n    let canvasAndContext = this._canvasPool[key].pop();\n    if (!canvasAndContext) {\n      canvasAndContext = this._createCanvasAndContext(minWidth, minHeight);\n    }\n    return canvasAndContext;\n  }\n  /**\n   * Place a render texture back into the pool.\n   * @param canvasAndContext\n   */\n  returnCanvasAndContext(canvasAndContext) {\n    const { width, height } = canvasAndContext.canvas;\n    const key = (width << 17) + (height << 1);\n    this._canvasPool[key].push(canvasAndContext);\n  }\n  clear() {\n    this._canvasPool = {};\n  }\n}\nconst CanvasPool = new CanvasPoolClass();\n\nexport { CanvasPool, CanvasPoolClass };\n//# sourceMappingURL=CanvasPool.mjs.map\n","import { DOMAdapter } from '../../../../environment/adapter';\nimport { nextPow2 } from '../../../../maths/misc/pow2';\n\nimport type { ICanvas, ICanvasRenderingContext2DSettings } from '../../../../environment/canvas/ICanvas';\nimport type { ICanvasRenderingContext2D } from '../../../../environment/canvas/ICanvasRenderingContext2D';\n\nexport interface CanvasAndContext\n{\n    canvas: ICanvas;\n    context: ICanvasRenderingContext2D;\n}\n\n/**\n * Texture pool, used by FilterSystem and plugins.\n *\n * Stores collection of temporary pow2 or screen-sized renderTextures\n *\n * If you use custom RenderTexturePool for your filters, you can use methods\n * `getFilterTexture` and `returnFilterTexture` same as in\n * @name CanvasPool\n * @memberof rendering\n */\nexport class CanvasPoolClass\n{\n    public canvasOptions: ICanvasRenderingContext2DSettings;\n\n    /**\n     * Allow renderTextures of the same size as screen, not just pow2\n     *\n     * Automatically sets to true after `setScreenSize`\n     * @default false\n     */\n    public enableFullScreen: boolean;\n    private _canvasPool: {[x in string | number]: CanvasAndContext[]};\n\n    constructor(canvasOptions?: ICanvasRenderingContext2DSettings)\n    {\n        this._canvasPool = Object.create(null);\n        this.canvasOptions = canvasOptions || {};\n        this.enableFullScreen = false;\n    }\n\n    /**\n     * Creates texture with params that were specified in pool constructor.\n     * @param pixelWidth - Width of texture in pixels.\n     * @param pixelHeight - Height of texture in pixels.\n     */\n    private _createCanvasAndContext(pixelWidth: number, pixelHeight: number): CanvasAndContext\n    {\n        const canvas = DOMAdapter.get().createCanvas();\n\n        canvas.width = pixelWidth;\n        canvas.height = pixelHeight;\n\n        const context = canvas.getContext('2d');\n\n        return { canvas, context };\n    }\n\n    /**\n     * Gets a Power-of-Two render texture or fullScreen texture\n     * @param minWidth - The minimum width of the render texture.\n     * @param minHeight - The minimum height of the render texture.\n     * @param resolution - The resolution of the render texture.\n     * @returns The new render texture.\n     */\n    public getOptimalCanvasAndContext(minWidth: number, minHeight: number, resolution = 1): CanvasAndContext\n    {\n        minWidth = Math.ceil((minWidth * resolution) - 1e-6);\n        minHeight = Math.ceil((minHeight * resolution) - 1e-6);\n        minWidth = nextPow2(minWidth);\n        minHeight = nextPow2(minHeight);\n\n        const key = (minWidth << 17) + (minHeight << 1);\n\n        if (!this._canvasPool[key])\n        {\n            this._canvasPool[key] = [];\n        }\n\n        let canvasAndContext = this._canvasPool[key].pop();\n\n        if (!canvasAndContext)\n        {\n            canvasAndContext = this._createCanvasAndContext(minWidth, minHeight);\n        }\n\n        return canvasAndContext;\n    }\n\n    /**\n     * Place a render texture back into the pool.\n     * @param canvasAndContext\n     */\n    public returnCanvasAndContext(canvasAndContext: CanvasAndContext): void\n    {\n        const { width, height } = canvasAndContext.canvas;\n\n        const key = (width << 17) + (height << 1);\n\n        this._canvasPool[key].push(canvasAndContext);\n    }\n\n    public clear(): void\n    {\n        this._canvasPool = {};\n    }\n}\n\nexport const CanvasPool = new CanvasPoolClass();\n","import { UniformGroup } from '../../shared/shader/UniformGroup.mjs';\n\n\"use strict\";\nconst batchSamplersUniformGroupHash = {};\nfunction getBatchSamplersUniformGroup(maxTextures) {\n  let batchSamplersUniformGroup = batchSamplersUniformGroupHash[maxTextures];\n  if (batchSamplersUniformGroup)\n    return batchSamplersUniformGroup;\n  const sampleValues = new Int32Array(maxTextures);\n  for (let i = 0; i < maxTextures; i++) {\n    sampleValues[i] = i;\n  }\n  batchSamplersUniformGroup = batchSamplersUniformGroupHash[maxTextures] = new UniformGroup({\n    uTextures: { value: sampleValues, type: `i32`, size: maxTextures }\n  }, { isStatic: true });\n  return batchSamplersUniformGroup;\n}\n\nexport { getBatchSamplersUniformGroup };\n//# sourceMappingURL=getBatchSamplersUniformGroup.mjs.map\n","import { UniformGroup } from '../../shared/shader/UniformGroup';\n\nconst batchSamplersUniformGroupHash: Record<number, UniformGroup> = {};\n\n/**\n * Automatically generates a uniform group that holds the texture samplers for a shader.\n * This is used mainly by the shaders that batch textures!\n * @param maxTextures - the number of textures that this uniform group will contain.\n * @returns a uniform group that holds the texture samplers.\n */\nexport function getBatchSamplersUniformGroup(maxTextures: number)\n{\n    let batchSamplersUniformGroup = batchSamplersUniformGroupHash[maxTextures];\n\n    if (batchSamplersUniformGroup) return batchSamplersUniformGroup;\n\n    const sampleValues = new Int32Array(maxTextures);\n\n    for (let i = 0; i < maxTextures; i++)\n    {\n        sampleValues[i] = i;\n    }\n\n    batchSamplersUniformGroup = batchSamplersUniformGroupHash[maxTextures] = new UniformGroup({\n        uTextures: { value: sampleValues, type: `i32`, size: maxTextures }\n    }, { isStatic: true });\n\n    return batchSamplersUniformGroup;\n}\n"],"names":["$parcel$export","e","n","v","s","Object","defineProperty","get","set","enumerable","configurable","parcelRequire","$parcel$global","globalThis","parcelRegister","register","module","exports","$eb69b04842624ee0$export$e56d0a06781accc9","$lTNTn","$ijJaR","constructor","canvasOptions","_canvasPool","create","enableFullScreen","_createCanvasAndContext","pixelWidth","pixelHeight","canvas","DOMAdapter","createCanvas","width","height","context","getContext","getOptimalCanvasAndContext","minWidth","minHeight","resolution","Math","ceil","nextPow2","key","canvasAndContext","pop","returnCanvasAndContext","push","clear","$d3be956b72507601$export$5fc8295c6cba6ffe","$1DaYW","$d3be956b72507601$var$batchSamplersUniformGroupHash","maxTextures","batchSamplersUniformGroup","sampleValues","Int32Array","i","UniformGroup","uTextures","value","type","size","isStatic"],"version":3,"file":"webworkerAll.9ff93f1a.js.map"}